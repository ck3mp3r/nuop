#!/usr/bin/env nu

# Get NUOP_MODE, defaulting to "standard"
let mode = ($env | get --optional NUOP_MODE | default "standard")

if $mode == "init" {
  init-sources
} else {
  # Install CRDs before starting operator (Standard mode only)
  if $mode == "standard" {
    install-crds
  }

  operator
}
